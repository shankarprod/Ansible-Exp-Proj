- name: configure frontend server
  hosts: frontend
  become: yes
  vars:

  tasks: 
  - name: install nginx server
    ansible.builtin.package: 
      name: nginx
      state: present
 
  - name: start nginx
    ansible.builtin.service:
      name: nginx
      state: start
      enabled: yes

  - name: remove html directory
    ansible.builtin.file:
      path: /usr/share/nginx/html
      state: absent

  - name: create app directory
    ansible.builtin.file:
      path: /usr/share/nginx/html
      state: directory

  - name: download the backend code
    ansible.builtin.get_url: 
    url: https://expense-builds.s3.us-east-1.amazonaws.com/expense-frontend-v2.zip
    dest: /tmp/frontend.zip

  - name: extract the code
    ansible.builtin.unarchive:
    src: /tmp/frontend.zip
    dest: /app
